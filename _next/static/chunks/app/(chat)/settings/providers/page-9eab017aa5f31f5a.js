(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3415,9136],{18745:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var r=a(98089),s=a(66135),n=a(2109),i=a(39485),d=a(70469),l=a(52636),c=a(53047);let o=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function u(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,c.cn)(o({variant:a}),t),...s})}var h=a(55928),m=a(80394),x=a(43028),v=a(39634),f=a(19376),g=a(14612),y=a(75718),p=a(83415);function j(){let[e,t]=(0,i.useState)([]),[a,l]=(0,i.useState)(!1),[c,o]=(0,i.useState)(null),[j,w]=(0,i.useState)(null),[b,N]=(0,i.useState)({}),[A,C]=(0,i.useState)(""),[F,P]=(0,i.useState)(""),[S,_]=(0,i.useState)(""),[E,k]=(0,i.useState)(""),[q,D]=(0,i.useState)(!0),I=(0,i.useCallback)(async()=>{try{let e=await (0,p.P7)();t(e)}catch(e){console.error("Failed to load providers:",e),d.o.error("Failed to load providers")}},[]);(0,i.useEffect)(()=>{I()},[I]);let T=()=>{C(""),P(""),_(""),k(""),D(!0),o(null),l(!1)},U=e=>{C(e.name),P(e.baseUrl),_(e.apiKey),k(e.model),D(e.isEnabled),o(e),l(!0)},L=async e=>{if(window.confirm("Are you sure you want to delete this provider?"))try{await (0,p.Ge)(e),d.o.success("Provider deleted successfully"),I()}catch(e){console.error("Failed to delete provider:",e),d.o.error("Failed to delete provider")}},B=async e=>{if(e.preventDefault(),!A||!F||!S)return void d.o.error("Please fill in all required fields");try{let e={id:(null==c?void 0:c.id)||(0,n.Ak)(),name:A,baseUrl:F,apiKey:S,model:E,createdAt:(null==c?void 0:c.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),isEnabled:q};await (0,p.Uu)(e),d.o.success(c?"Provider updated successfully":"Provider added successfully"),T(),I()}catch(e){console.error("Failed to save provider:",e),d.o.error("Failed to save provider")}},O=async e=>{w(e.id);try{let t=await (0,y.U)(e);N(a=>({...a,[e.id]:{success:t.success,message:t.message||"",error:t.error}})),t.success?d.o.success("Connection successful for ".concat(e.name)):d.o.error("Connection failed for ".concat(e.name,": ").concat(t.error))}catch(t){console.error("Failed to test provider:",t),d.o.error("Failed to test provider ".concat(e.name)),N(t=>({...t,[e.id]:{success:!1,message:"Test failed",error:"Internal error"}}))}finally{w(null)}},$=async()=>{let e={id:(null==c?void 0:c.id)||"new",name:A,baseUrl:F,apiKey:S,model:E,createdAt:(null==c?void 0:c.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),isEnabled:!0};w(e.id);try{let t=await (0,y.U)(e);N(a=>({...a,[e.id]:{success:t.success,message:t.message||"",error:t.error}})),t.success?d.o.success("Connection successful for ".concat(A)):d.o.error("Connection failed for ".concat(A,": ").concat(t.error))}catch(e){console.error("Failed to test provider:",e),d.o.error("Failed to test provider ".concat(A))}finally{w(null)}};return(0,r.jsx)("div",{className:"container max-w-6xl py-8",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"font-bold text-3xl",children:"AI Provider Management"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Configure and manage your AI providers"})]}),(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"AI Providers"}),(0,r.jsx)(m.BT,{children:"Add, edit, and manage your AI providers"})]}),(0,r.jsxs)(m.Wu,{children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-muted-foreground text-sm",children:[e.length," provider",1!==e.length?"s":""," ","configured"]}),(0,r.jsx)(h.$,{onClick:()=>{T(),l(!0)},children:"Add Provider"})]}),a?(0,r.jsxs)(m.Zp,{className:"mb-6",children:[(0,r.jsx)(m.aR,{children:(0,r.jsx)(m.ZB,{children:c?"Edit Provider":"Add New Provider"})}),(0,r.jsx)(m.Wu,{children:(0,r.jsxs)("form",{className:"space-y-4",onSubmit:B,children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"name",children:"Provider Name *"}),(0,r.jsx)(x.p,{id:"name",onChange:e=>C(e.target.value),placeholder:"e.g., Groq, Hugging Face",value:A})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v.J,{htmlFor:"baseUrl",children:"Base URL *"}),(0,r.jsx)(x.p,{id:"baseUrl",onChange:e=>P(e.target.value),placeholder:"e.g., https://api.groq.com/openai/v1",value:F})]}),(0,r.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,r.jsx)(v.J,{htmlFor:"apiKey",children:"API Key *"}),(0,r.jsx)(x.p,{id:"apiKey",onChange:e=>_(e.target.value),placeholder:"Enter your API key",type:"password",value:S})]}),(0,r.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,r.jsx)(v.J,{htmlFor:"model",children:"Model (Optional)"}),(0,r.jsx)(x.p,{id:"model",onChange:e=>k(e.target.value),placeholder:"e.g., llama3-8b-8192",value:E})]}),(0,r.jsxs)("div",{className:"flex items-center space-y-2 md:col-span-2",children:[(0,r.jsx)(f.d,{checked:q,id:"isEnabled",onCheckedChange:D}),(0,r.jsx)(v.J,{className:"ml-2",htmlFor:"isEnabled",children:"Enabled"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,r.jsx)(h.$,{onClick:T,type:"button",variant:"outline",children:"Cancel"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(h.$,{disabled:!A||!F||!S||"new"===j,onClick:()=>$(),type:"button",variant:"default",children:"new"===j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Testing..."]}):"Test Connection"}),(0,r.jsx)(h.$,{type:"submit",children:c?"Update Provider":"Add Provider"})]})]})]})})]}):null,e.length>0?(0,r.jsxs)(g.XI,{children:[(0,r.jsx)(g.A0,{children:(0,r.jsxs)(g.Hj,{children:[(0,r.jsx)(g.nd,{children:"Name"}),(0,r.jsx)(g.nd,{children:"Model"}),(0,r.jsx)(g.nd,{children:"Base URL"}),(0,r.jsx)(g.nd,{children:"Status"}),(0,r.jsx)(g.nd,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(g.BF,{children:e.map(e=>(0,r.jsxs)(g.Hj,{children:[(0,r.jsx)(g.nA,{className:"font-normal",children:e.name}),(0,r.jsx)(g.nA,{children:e.model||"-"}),(0,r.jsx)(g.nA,{className:"max-w-xs truncate",children:e.baseUrl}),(0,r.jsxs)(g.nA,{children:[e.isEnabled?(0,r.jsx)(u,{variant:"default",children:"Enabled"}):(0,r.jsx)(u,{variant:"secondary",children:"Disabled"}),b[e.id]&&(0,r.jsx)("div",{className:"mt-1",children:b[e.id].success?(0,r.jsx)(u,{className:"text-xs",variant:"default",children:"Connected"}):(0,r.jsx)(u,{className:"text-xs",variant:"destructive",children:"Failed"})})]}),(0,r.jsx)(g.nA,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(h.$,{className:"mr-2 h-4 w-4 animate-spin",children:"MyButton"}),(0,r.jsx)(h.$,{disabled:j===e.id,onClick:()=>O(e),size:"sm",variant:"outline",children:j===e.id?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Testing..."]}):"Test"}),(0,r.jsx)(h.$,{onClick:()=>U(e),size:"sm",variant:"outline",children:"Edit"}),(0,r.jsx)(h.$,{onClick:()=>L(e.id),size:"sm",variant:"outline",children:"Delete"})]})})]},e.id))})]}):(0,r.jsxs)("div",{className:"py-8 text-center text-muted-foreground",children:[(0,r.jsx)("p",{children:"No providers configured yet."}),(0,r.jsx)("p",{className:"mt-2",children:"Add your first provider to get started."})]})]})]})]})})}},24229:(e,t,a)=>{Promise.resolve().then(a.bind(a,18745))},83415:(e,t,a)=>{"use strict";a.d(t,{CE:()=>c,Dr:()=>v,Ge:()=>f,JH:()=>d,Lz:()=>l,P7:()=>x,Uu:()=>m,_L:()=>n.ry,bd:()=>n.gY,getLocalMessagesByChatId:()=>o,saveLocalChat:()=>i,saveLocalMessages:()=>u,si:()=>h});var r=a(98120),s=a(97229),n=a(91502);async function i(e){let{id:t,userId:a,title:r}=e;try{return await (0,n.xW)({id:t,userId:a,title:r})}catch(e){throw console.error("Error in saveLocalChat:",e),new s.P7("bad_request:database","Failed to save chat")}}async function d(e){let{userId:t}=e;try{let e=await (0,n.W2)(t);if(0===e.length)return{deletedCount:0};for(let t of e)await (0,n.L0)(t.id);return{deletedCount:e.length}}catch(e){throw new s.P7("bad_request:database","Failed to delete all chats by user id")}}async function l(e){let{id:t,limit:a,startingAfter:r,endingBefore:i}=e;try{let e=(await (0,n.W2)(t)).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),d=e;if(r){let t=e.find(e=>e.id===r);if(!t)throw new s.P7("not_found:database","Chat with id ".concat(r," not found"));d=e.filter(e=>new Date(e.createdAt).getTime()>new Date(t.createdAt).getTime())}else if(i){let t=e.find(e=>e.id===i);if(!t)throw new s.P7("not_found:database","Chat with id ".concat(i," not found"));d=e.filter(e=>new Date(e.createdAt).getTime()<new Date(t.createdAt).getTime())}let l=d.length>a;return{chats:l?d.slice(0,a):d,hasMore:l}}catch(e){throw new s.P7("bad_request:database","Failed to get chats by user id")}}async function c(e){let{id:t}=e;try{let e=await (0,n.getLocalChat)(t);if(!e)return null;return e}catch(e){throw new s.P7("bad_request:database","Failed to get chat by id")}}async function o(e){let{id:t}=e;try{return await (0,n.Em)(t)}catch(e){throw new s.P7("bad_request:database","Failed to get messages by chat id")}}async function u(e){let{messages:t}=e;try{if(0===t.length)return!0;let e=t[0].chatId;return await (0,n.b4)(e,t)}catch(e){throw new s.P7("bad_request:database","Failed to save messages")}}async function h(e){let{id:t}=e;try{return await (0,n.BP)(t)}catch(e){throw new s.P7("bad_request:database","Failed to get suggestions by document id")}}async function m(e){try{return await (0,n.aP)(e)}catch(e){throw new s.P7("bad_request:database","Failed to save provider")}}async function x(){try{let e=(0,r.F6)();if(!e)return[];return await (0,n.f5)(e)}catch(e){throw new s.P7("bad_request:database","Failed to get providers")}}async function v(e){try{return await (0,n.rC)(e)}catch(e){throw new s.P7("bad_request:database","Failed to get provider")}}async function f(e){try{return await (0,n.OG)(e)}catch(e){throw new s.P7("bad_request:database","Failed to delete provider")}}a(63045)}},e=>{var t=t=>e(e.s=t);e.O(0,[9200,1495,623,9268,1705,8539,3958,7358],()=>t(24229)),_N_E=e.O()}]);